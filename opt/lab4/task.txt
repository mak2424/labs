В работе 4 Вы познакомитесь с Intel MKL, и протестируете скорость его работы.

Для выполнения задания, сперва подключите библиотеку mkl командой:
source /opt/intel/mkl/bin/mklvars.sh intel64

При компиляции Вам нужно будет указывать компилятору путь до библиотеки. Intel подготовило интерактивную страницу, помогающую максимально быстро сформировать ключи компилятора.
На кластере установлена версия Intel MKL 2019.0, компилятор GNU C/C++, GNU openMP.

1. Ознакомьтесь с кодом программы mkl_test_v1.c. 
2. Скомпилируйте и запустите программу, команда:
 gcc mkl_test_v1.c -Wl,--start-group ${MKLROOT}/lib/intel64/libmkl_intel_ilp64.a ${MKLROOT}/lib/intel64/libmkl_gnu_thread.a ${MKLROOT}/lib/intel64/libmkl_core.a -Wl,--end-group -lgomp -lpthread -lm -ldl -o 1.o
 srun ./1.o
3. Выполните программу для N=500,1000,2000,4000. Постройте графики зависимости. Какая зависимость наблюдается для каждого метода вычисления?
4. Ознакомьтесь с кодом программы mkl_test_v2.c. Скомпилируйте и запустите его.
5. Поменяйте число потоков для библиотеки MKL, изменив переменную окружения:
export MKL_NUM_THREADS=k
где k - число потоков (1/2/3/...)
6. Запустите программу, сравните производительность для разного числа потоков.
7. Установите переменную окружения verbose, запустите программу и ознакомьтесь с выводом.
export MKL_VERBOSE=1
8. Ознакомьтесь с кодом программы mkl_test_v3.c. Скомпилируйте и запустите его.
9. Поварьируйте параметр MKL_ENABLE_INSTRUCTIONS == AVX512 | AVX2 | AVX | SSE4_2 | ....
Список доступных инструкций для процессора приведен в списке cat /proc/cpuinfo | grep flags | head -1
Список поддерживаемых параметров MKL_ENABLE_INSTRUCTIONS описан в документации.
10. Ознакомьтесь с параметром MKL_CBWR. Поменяйте его, посмотрите как это повлияет на время выполнения программы.

Для выполнения работы при каждом входе на кластер следует подключать актуальную версию компилятора, для этого выполните команду:
module load gcc
Проверить текущую версию можно командой:
gcc -v
Актуальная версия, установленная на кластере 8.3.0

Вопросы:
1. Сколько потоков MKL_NUM_THREADS устанавливает по умолчанию?
2. Какая зависимость времени вычисления от размера матрицы? (Линейная / экспоненциальная / логарифмическая)?
3. На что влияет параметр MKL_ENABLE_INSTRUCTIONS? Что такое наборы процессорных инструкций?
4. На что влияет параметр MKL_CBWR? 
